<script src="https://cdn.jsdelivr.net/gh/netizenorg/netnet-standard-library/build/nn.min.js"></script>

<script>
  /* global nn */

  let canvas, ctx

  const gif1 = new Image()
  gif1.src = `${nn.randomInt(0, 21)}.gif`

  const gif2 = new Image()
  gif2.src = `${nn.randomInt(0, 21)}.gif`

  const w = nn.width
  const h = nn.height
  
  function draw(x1, x2) {

    ctx.clearRect(0, 0, w, h)

    ctx.fillStyle = 'pink';
    ctx.fillRect(0, 0, canvas.width, canvas.height)
    ctx.fillStyle = 'gray';
    ctx.fillRect(100, h / 5, w - 200, h / 5)
    ctx.fillRect(100, 3 * h / 5, w - 200, h / 5)
    
    ctx.strokeText("Heather's Coin Toss", w / 2 - 125, h / 10)
    ctx.strokeText("Heads", 20, 3 * h / 10)
    ctx.strokeText("Tails", 20, 7 * h / 10)

    ctx.drawImage(gif1, 100 + x1, h / 5, w / 5, h / 5)
    ctx.drawImage(gif2, 100 + x2, 3 * h / 5, w / 5, h / 5)
  }

  function setup() {

    nn.get('body').css({
      margin: '0',
      height: '100vh'
    })

    canvas = nn.create('canvas').addTo('body')
    canvas.width = w // match the window's width
    canvas.height = h // match the window's height
    ctx = canvas.getContext('2d')
    ctx.font = "20px Courier New"

    let i = 0
    let running = true

    const speed1 = nn.randomInt(0, 20)
    const speed2 = nn.randomInt(0, 20)

    while (running) {
      draw(i * speed1, i * speed2)
      i++

      if (i * speed1 >= 4 * w / 5 - 200) {
        running = false
        ctx.clearRect(0, 0, w, h)
        ctx.strokeText("Heads Wins!", w / 2 - 125, h / 10)
      }
      
      if (i * speed2 >= 4 * w / 5 - 200) {
        running = false
        ctx.clearRect(0, 0, w, h)
        ctx.strokeText("Tails Wins!", w / 2 - 125, h / 10)
      }
  
      i = i + 1
    }
  }



  nn.on('load', setup)
  

</script>